import{f as r,m as i}from"./index-DfVD50Wy.js";function u(e){return{id:String(e.ID_Conversation??e.iD_Conversation??""),otherUserId:String(e.ID_User??e.iD_User??""),createdAt:e.Created_At??e.created_At??new Date().toISOString()}}function c(e,t){return{id:String(e.ID_Message??e.iD_Message??""),conversationId:t,senderId:String(e.ID_User_Sender??e.iD_User_Sender??""),content:e.Message_Content??e.message_Content??"",createdAt:e.Created_At??e.created_At??new Date().toISOString()}}async function d(){const e=await r("/api/auth/conversations",{method:"GET"});return(Array.isArray(e)?e:[]).map(u)}async function g(e){const t=await r(`/api/auth/conversations/${e}`,{method:"GET"}),n=(Array.isArray(t)?t:[]).map(a=>c(a,e));return n.sort((a,s)=>new Date(a.createdAt).getTime()-new Date(s.createdAt).getTime()),n}async function f(e){const t=await r("/api/auth/conversations",{method:"POST",body:{ID_Users:e,Created_At:new Date().toISOString()}});return typeof t=="number"?t:0}async function p(e,t,n,a){const s=await r(`/api/auth/conversations/${e}`,{method:"POST",body:{ID_Sender:t,ID_Reciever:n,Message:a.slice(0,1e3)}});return typeof s=="number"?s:0}async function y(e){try{const t=await r(`/api/auth/conversations/${e}/name`,{method:"GET"});if(typeof t=="string"&&t.trim().length>0)return t.trim();if(t&&typeof t=="object"){const n=t.Conversation_Name??t.value;if(typeof n=="string"&&n.trim().length>0)return n.trim()}return null}catch{return null}}async function l(e,t){try{return await r(`/api/auth/conversations/${e}/name`,{method:"PUT",body:{Conversation_Name:t.trim()}}),!0}catch{return!1}}async function h(e){try{const t=await r(`/api/auth/username/${e}`,{method:"GET"});if(typeof t=="string"&&t.trim().length>0)return t.trim();if(t&&typeof t=="object"){const n=t.value??t.username;if(typeof n=="string"&&n.trim().length>0)return n.trim()}return null}catch{return null}}async function _(){try{const e=await r("/api/auth/user",{method:"GET"});return i(e)??o()}catch{return o()}}function o(){return{id:"demo",username:"Demo User",email:"demo@example.com",bio:"Planning my story."}}export{d as a,y as b,g as c,f as d,_ as e,h as g,p as s,l as u};
