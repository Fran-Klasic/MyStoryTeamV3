import{d as y,o as f,c as v,m as x,a as l,b as i,g as I,w as g,f as b,t as V,r as u,n as _,_ as E,p as A,k as C,q as M,s as N}from"./index-CLJoXIYq.js";import{M as w,A as $}from"./MstInput-VNqTAOPU.js";const q={class:"mst-sign-in-form__fields"},R={class:"mst-sign-in-form__actions"},B=y({__name:"SignInForm",props:{onSubmitAuth:{type:Function}},emits:["error"],setup(h,{emit:m}){const d=h,s=m,o=u(""),r=u(""),e=u(!1),a=_(()=>o.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value)?"":"Enter a valid email":"Email is required"),n=_(()=>r.value?"":"Password is required"),S=_(()=>!e.value&&!a.value&&!n.value);async function k(){if(!S.value)return;const c=d.onSubmitAuth;e.value=!0;try{c?await c(o.value.trim(),r.value):s("error","No submit handler")}catch(t){s("error",t instanceof Error?t.message:"Sign in failed")}finally{e.value=!1}}return(c,t)=>(f(),v("form",{class:"mst-sign-in-form",onSubmit:x(k,["prevent"])},[t[2]||(t[2]=l("h2",{class:"mst-sign-in-form__title"},"Sign in",-1)),t[3]||(t[3]=l("p",{class:"mst-sign-in-form__subtitle"},"Welcome back to My Story Team",-1)),l("div",q,[i(w,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=p=>o.value=p),type:"email",label:"Email",placeholder:"you@example.com",autocomplete:"email",error:a.value,disabled:e.value},null,8,["modelValue","error","disabled"]),i(w,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=p=>r.value=p),type:"password",label:"Password",placeholder:"••••••••",autocomplete:"current-password",error:n.value,disabled:e.value},null,8,["modelValue","error","disabled"])]),l("div",R,[i(I,{type:"submit",variant:"primary",disabled:!S.value},{default:g(()=>[b(V(e.value?"Signing in…":"Sign in"),1)]),_:1},8,["disabled"])])],32))}}),F=E(B,[["__scopeId","data-v-acc93ca1"]]),D={class:"mst-auth-page"},L={key:0,class:"mst-auth-page__error"},P={class:"mst-auth-page__footer"},T=y({__name:"SignInView",setup(h){const m=N(),d=A(),s=u("");async function o(e,a){s.value="",await d.login(e,a);const n=m.query.redirect||"/app/dashboard";window.location.href=n}function r(e){s.value=e}return(e,a)=>{const n=M("RouterLink");return f(),v("main",D,[i($,null,{default:g(()=>[i(F,{"on-submit-auth":o,onError:r}),s.value?(f(),v("p",L,V(s.value),1)):C("",!0),l("p",P,[a[1]||(a[1]=b(" Don't have an account? ",-1)),i(n,{to:"/auth/register",class:"mst-auth-page__link"},{default:g(()=>[...a[0]||(a[0]=[b("Register",-1)])]),_:1})])]),_:1})])}}}),j=E(T,[["__scopeId","data-v-55634a3f"]]);export{j as default};
