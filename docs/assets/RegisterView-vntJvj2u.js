import{M as c,A as U}from"./MstInput-3BwGEmDH.js";import{d as C,o as _,c as b,m as M,a as m,b as o,g as N,w as g,f as w,t as R,r as i,n as d,_ as k,p as P,k as $,q}from"./index-DKTBb0-q.js";const B={class:"mst-register-form__fields"},F={class:"mst-register-form__actions"},I=C({__name:"RegisterForm",props:{onSubmitAuth:{type:Function}},emits:["error"],setup(h,{emit:v}){const n=h,p=v,u=i(""),r=i(""),a=i(""),s=i(""),t=i(!1),V=d(()=>u.value.trim()?"":"Username is required"),y=d(()=>r.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.value)?"":"Enter a valid email":"Email is required"),E=d(()=>a.value?a.value.length<6?"Password must be at least 6 characters":"":"Password is required"),S=d(()=>a.value&&a.value!==s.value?"Passwords do not match":""),x=d(()=>!t.value&&!V.value&&!y.value&&!E.value&&!S.value);async function A(){if(!x.value)return;const f=n.onSubmitAuth;t.value=!0;try{f?await f(u.value.trim(),r.value.trim(),a.value,s.value):p("error","No submit handler")}catch(e){p("error",e instanceof Error?e.message:"Registration failed")}finally{t.value=!1}}return(f,e)=>(_(),b("form",{class:"mst-register-form",onSubmit:M(A,["prevent"])},[e[4]||(e[4]=m("h2",{class:"mst-register-form__title"},"Create account",-1)),e[5]||(e[5]=m("p",{class:"mst-register-form__subtitle"}," Join My Story Team to start planning. ",-1)),m("div",B,[o(c,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),type:"text",label:"Username",placeholder:"John Doe",autocomplete:"username",error:V.value,disabled:t.value},null,8,["modelValue","error","disabled"]),o(c,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),type:"email",label:"Email",placeholder:"you@example.com",autocomplete:"email",error:y.value,disabled:t.value},null,8,["modelValue","error","disabled"]),o(c,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value=l),type:"password",label:"Password",placeholder:"••••••••",autocomplete:"new-password",error:E.value,disabled:t.value},null,8,["modelValue","error","disabled"]),o(c,{modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),type:"password",label:"Confirm password",placeholder:"••••••••",autocomplete:"new-password",error:S.value,disabled:t.value},null,8,["modelValue","error","disabled"])]),m("div",F,[o(N,{type:"submit",variant:"primary",disabled:!x.value},{default:g(()=>[w(R(t.value?"Creating account…":"Register"),1)]),_:1},8,["disabled"])])],32))}}),D=k(I,[["__scopeId","data-v-29436c2b"]]),J={class:"mst-auth-page"},L={key:0,class:"mst-auth-page__error"},T={class:"mst-auth-page__footer"},j=C({__name:"RegisterView",setup(h){const v=P(),n=i("");async function p(r,a,s,t){n.value="",await v.register(r,a,s,t),window.location.href="/app/dashboard"}function u(r){n.value=r}return(r,a)=>{const s=q("RouterLink");return _(),b("main",J,[o(U,null,{default:g(()=>[o(D,{"on-submit-auth":p,onError:u}),n.value?(_(),b("p",L,R(n.value),1)):$("",!0),m("p",T,[a[1]||(a[1]=w(" Already have an account? ",-1)),o(s,{to:"/auth/sign-in",class:"mst-auth-page__link"},{default:g(()=>[...a[0]||(a[0]=[w("Sign in",-1)])]),_:1})])]),_:1})])}}}),H=k(j,[["__scopeId","data-v-0422a635"]]);export{H as default};
