import{d as V,o as g,c as b,m as x,a as l,b as i,g as I,w as h,f as S,t as E,r as m,n as v,_ as k,p as A,k as C,q as M,s as N,h as R}from"./index-t2dBj-RG.js";import{M as w,A as $}from"./MstInput-CJ7acU6s.js";const q={class:"mst-sign-in-form__fields"},B={class:"mst-sign-in-form__actions"},F=V({__name:"SignInForm",props:{onSubmitAuth:{type:Function}},emits:["error"],setup(y,{emit:d}){const c=y,u=d,t=m(""),n=m(""),o=m(!1),r=v(()=>t.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)?"":"Enter a valid email":"Email is required"),a=v(()=>n.value?"":"Password is required"),s=v(()=>!o.value&&!r.value&&!a.value);async function p(){if(!s.value)return;const _=c.onSubmitAuth;o.value=!0;try{_?await _(t.value.trim(),n.value):u("error","No submit handler")}catch(e){u("error",e instanceof Error?e.message:"Sign in failed")}finally{o.value=!1}}return(_,e)=>(g(),b("form",{class:"mst-sign-in-form",onSubmit:x(p,["prevent"])},[e[2]||(e[2]=l("h2",{class:"mst-sign-in-form__title"},"Sign in",-1)),e[3]||(e[3]=l("p",{class:"mst-sign-in-form__subtitle"},"Welcome back to My Story Team",-1)),l("div",q,[i(w,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=f=>t.value=f),type:"email",label:"Email",placeholder:"you@example.com",autocomplete:"email",error:r.value,disabled:o.value},null,8,["modelValue","error","disabled"]),i(w,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=f=>n.value=f),type:"password",label:"Password",placeholder:"••••••••",autocomplete:"current-password",error:a.value,disabled:o.value},null,8,["modelValue","error","disabled"])]),l("div",B,[i(I,{type:"submit",variant:"primary",disabled:!s.value},{default:h(()=>[S(E(o.value?"Signing in…":"Sign in"),1)]),_:1},8,["disabled"])])],32))}}),W=k(F,[["__scopeId","data-v-acc93ca1"]]),D={class:"mst-auth-page"},L={key:0,class:"mst-auth-page__error"},P={class:"mst-auth-page__footer"},T=V({__name:"SignInView",setup(y){const d=N(),c=R(),u=A(),t=m("");async function n(r,a){t.value="",await u.login(r,a);const s=d.query.redirect||"/app/dashboard",p=typeof s=="string"&&s.startsWith("/")&&!s.startsWith("//")?s:"/app/dashboard";c.replace(p)}function o(r){t.value=r}return(r,a)=>{const s=M("RouterLink");return g(),b("main",D,[i($,null,{default:h(()=>[i(W,{"on-submit-auth":n,onError:o}),t.value?(g(),b("p",L,E(t.value),1)):C("",!0),l("p",P,[a[1]||(a[1]=S(" Don't have an account? ",-1)),i(s,{to:"/auth/register",class:"mst-auth-page__link"},{default:h(()=>[...a[0]||(a[0]=[S("Register",-1)])]),_:1})])]),_:1})])}}}),z=k(T,[["__scopeId","data-v-75b00f4c"]]);export{z as default};
