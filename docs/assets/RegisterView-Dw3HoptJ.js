import{d as x,o as b,c as g,m as U,a as m,b as s,g as M,w as h,f as w,t as C,r as i,n as d,_ as k,p as N,k as P,q as $,h as q}from"./index-t2dBj-RG.js";import{M as c,A as B}from"./MstInput-CJ7acU6s.js";const F={class:"mst-register-form__fields"},I={class:"mst-register-form__actions"},D=x({__name:"RegisterForm",props:{onSubmitAuth:{type:Function}},emits:["error"],setup(V,{emit:v}){const f=V,o=v,n=i(""),l=i(""),a=i(""),t=i(""),r=i(!1),p=d(()=>n.value.trim()?"":"Username is required"),y=d(()=>l.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.value)?"":"Enter a valid email":"Email is required"),E=d(()=>a.value?a.value.length<6?"Password must be at least 6 characters":"":"Password is required"),S=d(()=>a.value&&a.value!==t.value?"Passwords do not match":""),R=d(()=>!r.value&&!p.value&&!y.value&&!E.value&&!S.value);async function A(){if(!R.value)return;const _=f.onSubmitAuth;r.value=!0;try{_?await _(n.value.trim(),l.value.trim(),a.value,t.value):o("error","No submit handler")}catch(e){o("error",e instanceof Error?e.message:"Registration failed")}finally{r.value=!1}}return(_,e)=>(b(),g("form",{class:"mst-register-form",onSubmit:U(A,["prevent"])},[e[4]||(e[4]=m("h2",{class:"mst-register-form__title"},"Create account",-1)),e[5]||(e[5]=m("p",{class:"mst-register-form__subtitle"}," Join My Story Team to start planning. ",-1)),m("div",F,[s(c,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u),type:"text",label:"Username",placeholder:"John Doe",autocomplete:"username",error:p.value,disabled:r.value},null,8,["modelValue","error","disabled"]),s(c,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=u=>l.value=u),type:"email",label:"Email",placeholder:"you@example.com",autocomplete:"email",error:y.value,disabled:r.value},null,8,["modelValue","error","disabled"]),s(c,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=u=>a.value=u),type:"password",label:"Password",placeholder:"••••••••",autocomplete:"new-password",error:E.value,disabled:r.value},null,8,["modelValue","error","disabled"]),s(c,{modelValue:t.value,"onUpdate:modelValue":e[3]||(e[3]=u=>t.value=u),type:"password",label:"Confirm password",placeholder:"••••••••",autocomplete:"new-password",error:S.value,disabled:r.value},null,8,["modelValue","error","disabled"])]),m("div",I,[s(M,{type:"submit",variant:"primary",disabled:!R.value},{default:h(()=>[w(C(r.value?"Creating account…":"Register"),1)]),_:1},8,["disabled"])])],32))}}),J=k(D,[["__scopeId","data-v-29436c2b"]]),L={class:"mst-auth-page"},T={key:0,class:"mst-auth-page__error"},j={class:"mst-auth-page__footer"},z=x({__name:"RegisterView",setup(V){const v=q(),f=N(),o=i("");async function n(a,t,r,p){o.value="",await f.register(a,t,r,p),v.replace("/app/dashboard")}function l(a){o.value=a}return(a,t)=>{const r=$("RouterLink");return b(),g("main",L,[s(B,null,{default:h(()=>[s(J,{"on-submit-auth":n,onError:l}),o.value?(b(),g("p",T,C(o.value),1)):P("",!0),m("p",j,[t[1]||(t[1]=w(" Already have an account? ",-1)),s(r,{to:"/auth/sign-in",class:"mst-auth-page__link"},{default:h(()=>[...t[0]||(t[0]=[w("Sign in",-1)])]),_:1})])]),_:1})])}}}),K=k(z,[["__scopeId","data-v-e6ce1b2b"]]);export{K as default};
